% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sve_from_effect.R
\name{sve_from_effect}
\alias{sve_from_effect}
\title{Symmetric Vaccine Efficacy from Relative Effect Measures}
\usage{
sve_from_effect(theta, var_log_theta, level = 0.95, transform = TRUE, c = 1.96)
}
\arguments{
\item{theta}{Numeric. The relative effect measure (e.g., relative risk from
Poisson regression, hazard ratio from Cox model, etc.). Can be a vector.}

\item{var_log_theta}{Numeric. The estimated variance of log(theta), typically
obtained from model output (e.g., \code{vcov(model)} or the squared standard
error). Must have the same length as \code{theta}.}

\item{level}{Confidence level for the interval (default is 0.95).}

\item{transform}{Logical. If \code{TRUE} (default), applies an archtanh-transform
before constructing confidence intervals and then transforms back to the
original scale (tanh-Wald). If \code{FALSE}, uses a standard Wald interval.}

\item{c}{Numeric. Constant for determining epsilon in the smoothing
approximation (default is 1.96). The smoothing parameter is set to
\code{c * sqrt(var_log_theta)}.}
}
\value{
A data frame with the following columns:
\describe{
\item{estimate}{The symmetric vaccine efficacy estimate.}
\item{lower}{Lower bound of the confidence interval.}
\item{upper}{Upper bound of the confidence interval.}
\item{level}{Confidence interval level.}
\item{method}{Indicates whether the interval is a tanh-Wald interval or
standard Wald.}
}
}
\description{
Computes the \strong{symmetric vaccine efficacy (SVE)} and associated confidence
intervals from a relative effect measure (e.g., relative risk,
hazard ratio, odds ratio) obtained from a regression model.
}
\details{
The symmetric vaccine efficacy (SVE) from a relative effect measure is:
\deqn{
\text{SVE} = \frac{2(1 - \theta)}{1 + \theta + |1 - \theta|}
}
where \eqn{\theta} is the relative effect measure.

The variance is computed via the delta method applied to \eqn{\phi = \log(\theta)}.
When \eqn{|1 - \theta| > \varepsilon}, the derivative depends on whether
\eqn{\theta < 1} (protective) or \eqn{\theta > 1} (harmful). When
\eqn{|1 - \theta| \leq \varepsilon}, a smooth approximation is used.
}
\examples{
# Example with a hazard ratio from a Cox model
# Suppose: HR = 0.7, SE(log(HR)) = 0.15
hr <- 0.7
se_log_hr <- 0.15
var_log_hr <- se_log_hr^2
sve_from_effect(theta = hr, var_log_theta = var_log_hr)

# Example with multiple effect estimates (e.g., from subgroups)
hrs <- c(0.5, 0.8, 1.2)
var_log_hrs <- c(0.04, 0.025, 0.036)
sve_from_effect(theta = hrs, var_log_theta = var_log_hrs)

# Using output directly from a Cox model
\dontrun{
library(survival)
fit <- coxph(Surv(time, status) ~ vaccination + age + baseline_risk,
             data = sim_trial_data)
hr <- exp(coef(fit)["vaccination"])
var_log_hr <- vcov(fit)["vaccination", "vaccination"]
sve_from_effect(theta = hr, var_log_theta = var_log_hr)
}

}
